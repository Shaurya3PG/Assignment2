{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ShippingFormComponent = void 0;\nvar shopping_cart_1 = require(\"../../../shared/models/shopping-cart\");\nvar order_service_1 = require(\"../../../shared/services/order.service\");\nvar auth_service_1 = require(\"../../../shared/services/auth.service\");\nvar router_1 = require(\"@angular/router\");\nvar order_1 = require(\"../../../shared/models/order\");\nvar i0 = require(\"@angular/core\");\nvar i1 = require(\"@angular/router\");\nvar i2 = require(\"../../../shared/services/auth.service\");\nvar i3 = require(\"../../../shared/services/order.service\");\nfunction ShippingFormComponent_div_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Name is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ShippingFormComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, ShippingFormComponent_div_7_div_1_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    var _r1 = i0.ɵɵreference(6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors.required);\n  }\n}\nfunction ShippingFormComponent_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Address Line 1 is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ShippingFormComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, ShippingFormComponent_div_13_div_1_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    var _r3 = i0.ɵɵreference(12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors.required);\n  }\n}\nfunction ShippingFormComponent_div_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Address Line 2 is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ShippingFormComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, ShippingFormComponent_div_18_div_1_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    var _r5 = i0.ɵɵreference(17);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors.required);\n  }\n}\nfunction ShippingFormComponent_div_24_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"City is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ShippingFormComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, ShippingFormComponent_div_24_div_1_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    var _r7 = i0.ɵɵreference(23);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r7.errors.required);\n  }\n}\nvar ShippingFormComponent = /** @class */function () {\n  function ShippingFormComponent(router, authService, orderService) {\n    this.router = router;\n    this.authService = authService;\n    this.orderService = orderService;\n    this.shipping = {};\n  }\n  ShippingFormComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.userSubscription = this.authService.user$.subscribe(function (user) {\n      return _this.userId = user.uid;\n    });\n  };\n  ShippingFormComponent.prototype.ngOnDestroy = function () {\n    this.userSubscription.unsubscribe();\n  };\n  ShippingFormComponent.prototype.placeOrder = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var order, result;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            order = new order_1.Order(this.userId, this.shipping, this.cart);\n            return [4 /*yield*/, this.orderService.placeOrder(order)];\n          case 1:\n            result = _a.sent();\n            this.router.navigate(['/order-success', result.key]);\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  ShippingFormComponent.ɵfac = function ShippingFormComponent_Factory(t) {\n    return new (t || ShippingFormComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.OrderService));\n  };\n  ShippingFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShippingFormComponent,\n    selectors: [[\"shipping-form\"]],\n    inputs: {\n      cart: \"cart\"\n    },\n    decls: 27,\n    vars: 9,\n    consts: [[\"f\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"\"], [\"name\", \"name\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"ngModel\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"name\", \"addressLine1\", \"type\", \"text\", \"placeholder\", \"Line 1\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"addressLine1\", \"ngModel\"], [\"name\", \"addressLine2\", \"type\", \"text\", \"placeholder\", \"Line 2\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"addressLine2\", \"ngModel\"], [\"name\", \"city\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"city\", \"ngModel\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"alert\", \"alert-danger\"], [4, \"ngIf\"]],\n    template: function ShippingFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", null, 0)(2, \"div\", 1)(3, \"label\", 2);\n        i0.ɵɵtext(4, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"input\", 3, 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ShippingFormComponent_Template_input_ngModelChange_5_listener($event) {\n          return ctx.shipping.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, ShippingFormComponent_div_7_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 1)(9, \"label\", 2);\n        i0.ɵɵtext(10, \"Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"input\", 6, 7);\n        i0.ɵɵlistener(\"ngModelChange\", function ShippingFormComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.shipping.addressLine1 = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, ShippingFormComponent_div_13_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 1);\n        i0.ɵɵelement(15, \"label\", 2);\n        i0.ɵɵelementStart(16, \"input\", 8, 9);\n        i0.ɵɵlistener(\"ngModelChange\", function ShippingFormComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.shipping.addressLine2 = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, ShippingFormComponent_div_18_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 1)(20, \"label\", 2);\n        i0.ɵɵtext(21, \"City\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"input\", 10, 11);\n        i0.ɵɵlistener(\"ngModelChange\", function ShippingFormComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.shipping.city = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(24, ShippingFormComponent_div_24_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function ShippingFormComponent_Template_button_click_25_listener() {\n          return ctx.placeOrder();\n        });\n        i0.ɵɵtext(26, \"Place Order\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        var _r0 = i0.ɵɵreference(1);\n        var _r1 = i0.ɵɵreference(6);\n        var _r3 = i0.ɵɵreference(12);\n        var _r5 = i0.ɵɵreference(17);\n        var _r7 = i0.ɵɵreference(23);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.shipping.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r1.touched && _r1.invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.shipping.addressLine1);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r3.touched && _r3.invalid);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.shipping.addressLine2);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r5.touched && _r5.invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.shipping.city);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r7.touched && _r7.invalid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !_r0.valid);\n      }\n    },\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n  return ShippingFormComponent;\n}();\nexports.ShippingFormComponent = ShippingFormComponent;","map":{"version":3,"mappings":"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","names":["i0","router","authService","orderService","ShippingFormComponent","userSubscription","user$","subscribe","userId","user","uid","unsubscribe","order","order_1","shipping","cart","placeOrder","result","_a","navigate","key","selectors","inputs","decls","vars","consts","template","ctx","exports"],"sourceRoot":"","sources":["C:\\Angular\\routeShop\\src\\app\\shopping\\components\\shipping-form\\shipping-form.component.ts","C:\\Angular\\routeShop\\src\\app\\shopping\\components\\shipping-form\\shipping-form.component.html"],"sourcesContent":["import { ShoppingCart } from '../../../shared/models/shopping-cart';\nimport { OrderService } from '../../../shared/services/order.service';\nimport { AuthService } from '../../../shared/services/auth.service';\nimport { Router } from '@angular/router';\nimport { Subscription } from 'rxjs/Subscription';\nimport { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { Order } from \"../../../shared/models/order\";\n\n@Component({\n  selector: 'shipping-form',\n  templateUrl: './shipping-form.component.html',\n  styleUrls: ['./shipping-form.component.css']\n})\nexport class ShippingFormComponent implements OnInit, OnDestroy {\n  @Input('cart') cart: ShoppingCart;\n  shipping = {}; \n  userSubscription: Subscription;\n  userId: string;\n  \n  constructor(\n    private router: Router,\n    private authService: AuthService,\n    private orderService: OrderService) {\n  }\n\n  ngOnInit() {\n    this.userSubscription = this.authService.user$.subscribe(user => this.userId = user.uid);\n  }\n\n  ngOnDestroy() { \n    this.userSubscription.unsubscribe();\n  }\n\n  async placeOrder() {\n    let order = new Order(this.userId, this.shipping, this.cart);\n    let result = await this.orderService.placeOrder(order);\n    this.router.navigate(['/order-success', result.key]);\n  }    \n}\n","<form #f=\"ngForm\">\n  <div class=\"form-group\">\n    <label for=\"\">Name</label>\n    <input #name=\"ngModel\" name=\"name\" [(ngModel)]=\"shipping.name\" type=\"text\" class=\"form-control\" required>\n    <div class=\"alert alert-danger\" *ngIf=\"name.touched && name.invalid\">\n      <div *ngIf=\"name.errors.required\">Name is required.</div>\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"\">Address</label>\n    <input #addressLine1=\"ngModel\" name=\"addressLine1\" [(ngModel)]=\"shipping.addressLine1\" type=\"text\" class=\"form-control\" placeholder=\"Line 1\" required>\n    <div class=\"alert alert-danger\" *ngIf=\"addressLine1.touched && addressLine1.invalid\">\n      <div *ngIf=\"addressLine1.errors.required\">Address Line 1 is required.</div>\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"\"></label>\n    <input #addressLine2=\"ngModel\" name=\"addressLine2\" [(ngModel)]=\"shipping.addressLine2\" type=\"text\" class=\"form-control\" placeholder=\"Line 2\" required>\n    <div class=\"alert alert-danger\" *ngIf=\"addressLine2.touched && addressLine2.invalid\">\n      <div *ngIf=\"addressLine2.errors.required\">Address Line 2 is required.</div>\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"\">City</label>\n    <input #city=\"ngModel\" name=\"city\" [(ngModel)]=\"shipping.city\" type=\"text\" class=\"form-control\" required>\n    <div class=\"alert alert-danger\" *ngIf=\"city.touched && city.invalid\">\n      <div *ngIf=\"city.errors.required\">City is required.</div>\n    </div>\n  </div>\n  <button \n    [disabled]=\"!f.valid\"\n    (click)=\"placeOrder()\"\n    class=\"btn btn-primary\">Place Order</button>\n</form>    \n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}