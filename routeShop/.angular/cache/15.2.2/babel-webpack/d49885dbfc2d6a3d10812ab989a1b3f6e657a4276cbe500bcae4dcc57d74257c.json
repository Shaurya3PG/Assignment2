{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BsNavbarComponent = void 0;\nvar shopping_cart_service_1 = require(\"../../../shared/services/shopping-cart.service\");\nvar auth_service_1 = require(\"../../../shared/services/auth.service\");\nvar i0 = require(\"@angular/core\");\nvar i1 = require(\"../../../shared/services/auth.service\");\nvar i2 = require(\"../../../shared/services/shopping-cart.service\");\nvar i3 = require(\"@angular/router\");\nfunction BsNavbarComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var cart_r4 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cart_r4.totalItemsCount, \" \");\n  }\n}\nfunction BsNavbarComponent_ng_template_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 8)(1, \"a\", 16);\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction BsNavbarComponent_li_16_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 23);\n    i0.ɵɵtext(2, \"Manage Orders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 24);\n    i0.ɵɵtext(4, \"Manage Products\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction BsNavbarComponent_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 17)(1, \"a\", 18);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 19)(4, \"a\", 20);\n    i0.ɵɵtext(5, \"My Orders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, BsNavbarComponent_li_16_ng_container_6_Template, 5, 0, \"ng-container\", 21);\n    i0.ɵɵelementStart(7, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function BsNavbarComponent_li_16_Template_a_click_7_listener() {\n      i0.ɵɵrestoreView(_r7);\n      var ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.logout());\n    });\n    i0.ɵɵtext(8, \"Log Out\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    var ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.appUser.name, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.appUser.isAdmin);\n  }\n}\nvar BsNavbarComponent = /** @class */function () {\n  function BsNavbarComponent(auth, shoppingCartService) {\n    this.auth = auth;\n    this.shoppingCartService = shoppingCartService;\n  }\n  BsNavbarComponent.prototype.ngOnInit = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a;\n      var _this = this;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            this.auth.appUser$.subscribe(function (appUser) {\n              return _this.appUser = appUser;\n            });\n            _a = this;\n            return [4 /*yield*/, this.shoppingCartService.getCart()];\n          case 1:\n            _a.cart$ = _b.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  BsNavbarComponent.prototype.logout = function () {\n    this.auth.logout();\n  };\n  BsNavbarComponent.ɵfac = function BsNavbarComponent_Factory(t) {\n    return new (t || BsNavbarComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ShoppingCartService));\n  };\n  BsNavbarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BsNavbarComponent,\n    selectors: [[\"bs-navbar\"]],\n    decls: 17,\n    vars: 5,\n    consts: [[1, \"navbar\", \"navbar-expand-md\", \"navbar-light\", \"bg-light\", \"fixed-top\"], [1, \"container\"], [\"routerLink\", \"/\", 1, \"navbar-brand\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-leaf\"], [\"type\", \"button\", \"data-toggle\", \"collapse\", \"data-target\", \"#navbarsExampleDefault\", \"aria-controls\", \"navbarsExampleDefault\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarsExampleDefault\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"mr-auto\"], [1, \"nav-item\"], [\"routerLink\", \"/shopping-cart\", 1, \"nav-link\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-shopping-cart\"], [\"class\", \"badge badge-warning badge-pill\", 4, \"ngIf\"], [1, \"navbar-nav\"], [\"anonymousUser\", \"\"], [\"ngbDropdown\", \"\", \"class\", \"nav-item dropdown\", 4, \"ngIf\", \"ngIfElse\"], [1, \"badge\", \"badge-warning\", \"badge-pill\"], [\"routerLink\", \"/login\", 1, \"nav-link\"], [\"ngbDropdown\", \"\", 1, \"nav-item\", \"dropdown\"], [\"ngbDropdownToggle\", \"\", \"id\", \"dropdown01\", \"data-toggle\", \"dropdown\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [\"ngbDropdownMenu\", \"\", \"aria-labelledby\", \"dropdown01\", 1, \"dropdown-menu\"], [\"routerLink\", \"/my/orders\", 1, \"dropdown-item\"], [4, \"ngIf\"], [1, \"dropdown-item\", 3, \"click\"], [\"routerLink\", \"/admin/orders\", 1, \"dropdown-item\"], [\"routerLink\", \"/admin/products\", 1, \"dropdown-item\"]],\n    template: function BsNavbarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"a\", 2);\n        i0.ɵɵelement(3, \"i\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"button\", 4);\n        i0.ɵɵelement(5, \"span\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 6)(7, \"ul\", 7)(8, \"li\", 8)(9, \"a\", 9);\n        i0.ɵɵelement(10, \"i\", 10);\n        i0.ɵɵtemplate(11, BsNavbarComponent_span_11_Template, 2, 1, \"span\", 11);\n        i0.ɵɵpipe(12, \"async\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"ul\", 12);\n        i0.ɵɵtemplate(14, BsNavbarComponent_ng_template_14_Template, 3, 0, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(16, BsNavbarComponent_li_16_Template, 9, 2, \"li\", 14);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        var _r1 = i0.ɵɵreference(15);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(12, 3, ctx.cart$));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.appUser)(\"ngIfElse\", _r1);\n      }\n    },\n    dependencies: [i3.RouterLink],\n    styles: [\".dropdown-toggle[_ngcontent-%COMP%] { \\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29yZS9jb21wb25lbnRzL2JzLW5hdmJhci9icy1uYXZiYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7RUFDRSxlQUFlO0FBQ2pCIiwic291cmNlc0NvbnRlbnQiOlsiXG4uZHJvcGRvd24tdG9nZ2xlIHsgXG4gIGN1cnNvcjogcG9pbnRlcjtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n  return BsNavbarComponent;\n}();\nexports.BsNavbarComponent = BsNavbarComponent;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AAEA;;;;;;;ICUYA,gCAA2E;IACzEA,YACF;IAAAA,iBAAO;;;;IADLA,eACF;IADEA,wDACF;;;;;IAMFA,6BAAqB;IACqBA,qBAAK;IAAAA,iBAAI;;;;;IASjDA,6BAAsC;IACpCA,6BAAoD;IAAAA,6BAAa;IAAAA,iBAAI;IACrEA,6BAAsD;IAAAA,+BAAe;IAAAA,iBAAI;IAC3EA,0BAAe;;;;;;IATnBA,8BAA8E;IAE1EA,YACF;IAAAA,iBAAI;IACJA,+BAAwE;IACrBA,yBAAS;IAAAA,iBAAI;IAC9DA,2FAGe;IACfA,6BAA4C;IAAnBA;MAAAA;MAAA;MAAA,OAASA,8BAAQ;IAAA,EAAC;IAACA,uBAAO;IAAAA,iBAAI;;;;IARvDA,eACF;IADEA,oDACF;IAGiBA,eAAqB;IAArBA,6CAAqB;;;ADzBhD;EASE,2BAAoBC,IAAiB,EAAUC,mBAAwC;IAAnE,SAAI,GAAJD,IAAI;IAAuB,wBAAmB,GAAnBC,mBAAmB;EAClE;EAEMC,oCAAQ,GAAd;;;;;;;YACE,IAAI,CAACF,IAAI,CAACG,QAAQ,CAACC,SAAS,CAAC,iBAAO;cAAI,YAAI,CAACC,OAAO,GAAGA,OAAO;YAAtB,CAAsB,CAAC;YAC/DC,SAAI;YAAS,qBAAM,IAAI,CAACL,mBAAmB,CAACM,OAAO,EAAE;;YAArDD,GAAKE,KAAK,GAAGC,SAAwC;;;;;GACtD;;EAEDP,kCAAM,GAAN;IACE,IAAI,CAACF,IAAI,CAACU,MAAM,EAAE;EACpB,CAAC;;qBAdUR,iBAAiB;EAAA;;UAAjBA,iBAAiB;IAAAS;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCZ9BhB,8BAAqE;QAG/DA,uBAA6C;QAC/CA,iBAAI;QACJA,iCAAoM;QAClMA,0BAAyC;QAC3CA,iBAAS;QAETA,8BAAiE;QAIzDA,yBAAsD;QACtDA,uEAEO;;QACTA,iBAAI;QAGRA,+BAAuB;QACrBA,sHAIc;QACdA,mEAYK;QACPA,iBAAK;;;;QAzB+CA,gBAAoB;QAApBA,uDAAoB;QAYrDA,eAAe;QAAfA,kCAAe;;;;;;0BD1BxC;CA4BC,EArBD;AAKaiB","names":["i0","auth","shoppingCartService","BsNavbarComponent","appUser$","subscribe","appUser","_a","getCart","cart$","_b","logout","selectors","decls","vars","consts","template","exports"],"sourceRoot":"","sources":["C:\\Angular\\routeShop\\src\\app\\core\\components\\bs-navbar\\bs-navbar.component.ts","C:\\Angular\\routeShop\\src\\app\\core\\components\\bs-navbar\\bs-navbar.component.html"],"sourcesContent":["import { ShoppingCart } from '../../../shared/models/shopping-cart';\nimport { Observable } from 'rxjs/Observable';\nimport { ShoppingCartService } from '../../../shared/services/shopping-cart.service';\nimport { AppUser } from '../../../shared/models/app-user';\nimport { AuthService } from '../../../shared/services/auth.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'bs-navbar',\n  templateUrl: './bs-navbar.component.html',\n  styleUrls: ['./bs-navbar.component.css']\n})\nexport class BsNavbarComponent implements OnInit {\n  appUser: AppUser;\n  cart$: Observable<ShoppingCart>;\n\n  constructor(private auth: AuthService, private shoppingCartService: ShoppingCartService) { \n  }\n\n  async ngOnInit() { \n    this.auth.appUser$.subscribe(appUser => this.appUser = appUser);\n    this.cart$ = await this.shoppingCartService.getCart();\n  }\n\n  logout() {\n    this.auth.logout();\n  }\n\n}\n","<nav class=\"navbar navbar-expand-md navbar-light bg-light fixed-top\">\n  <div class=\"container\">\n    <a class=\"navbar-brand\" routerLink=\"/\">\n      <i class=\"fa fa-leaf\" aria-hidden=\"true\"></i>\n    </a>\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarsExampleDefault\" aria-controls=\"navbarsExampleDefault\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n      <span class=\"navbar-toggler-icon\"></span>\n    </button>\n  \n    <div class=\"collapse navbar-collapse\" id=\"navbarsExampleDefault\">\n      <ul class=\"navbar-nav mr-auto\">\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" routerLink=\"/shopping-cart\">\n            <i class=\"fa fa-shopping-cart\" aria-hidden=\"true\"></i>\n            <span class=\"badge badge-warning badge-pill\" *ngIf=\"cart$ | async as cart\">\n              {{ cart.totalItemsCount }}\n            </span>\n          </a>\n        </li>\n      </ul>\n      <ul class=\"navbar-nav\">\n        <ng-template #anonymousUser>\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" routerLink=\"/login\">Login</a>\n          </li>\n        </ng-template>\n        <li ngbDropdown *ngIf=\"appUser; else anonymousUser\" class=\"nav-item dropdown\">\n          <a ngbDropdownToggle class=\"nav-link dropdown-toggle\" id=\"dropdown01\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            {{ appUser.name }}\n          </a>\n          <div ngbDropdownMenu class=\"dropdown-menu\" aria-labelledby=\"dropdown01\">\n            <a class=\"dropdown-item\" routerLink=\"/my/orders\">My Orders</a>\n            <ng-container *ngIf=\"appUser.isAdmin\">\n              <a class=\"dropdown-item\" routerLink=\"/admin/orders\">Manage Orders</a>\n              <a class=\"dropdown-item\" routerLink=\"/admin/products\">Manage Products</a>\n            </ng-container>\n            <a class=\"dropdown-item\" (click)=\"logout()\">Log Out</a>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</nav>"]},"metadata":{},"sourceType":"script","externalDependencies":[]}