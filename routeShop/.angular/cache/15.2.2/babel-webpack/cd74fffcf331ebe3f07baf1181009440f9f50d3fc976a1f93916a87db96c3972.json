{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AdminProductsComponent = void 0;\nvar product_service_1 = require(\"../../../shared/services/product.service\");\nvar angular_4_data_table_1 = require(\"angular-4-data-table\");\nvar i0 = require(\"@angular/core\");\nvar i1 = require(\"../../../shared/services/product.service\");\nvar i2 = require(\"@angular/router\");\nfunction AdminProductsComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n    i0.ɵɵpipe(1, \"currency\");\n  }\n  if (rf & 2) {\n    var item_r5 = ctx.item;\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(1, 1, item_r5.price, \"USD\", true), \" \");\n  }\n}\nvar _c0 = function (a1) {\n  return [\"/admin/products/\", a1];\n};\nfunction AdminProductsComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 7);\n    i0.ɵɵtext(1, \"Edit\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var item_r6 = ctx.item;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c0, item_r6.$key));\n  }\n}\nvar AdminProductsComponent = /** @class */function () {\n  function AdminProductsComponent(productService) {\n    var _this = this;\n    this.productService = productService;\n    this.items = [];\n    this.subscription = this.productService.getAll().subscribe(function (products) {\n      _this.products = products;\n      _this.initializeTable(products);\n    });\n  }\n  AdminProductsComponent.prototype.initializeTable = function (products) {\n    var _this = this;\n    this.tableResource = new angular_4_data_table_1.DataTableResource(products);\n    this.tableResource.query({\n      offset: 0\n    }).then(function (items) {\n      return _this.items = items;\n    });\n    this.tableResource.count().then(function (count) {\n      return _this.itemCount = count;\n    });\n  };\n  AdminProductsComponent.prototype.reloadItems = function (params) {\n    var _this = this;\n    if (!this.tableResource) return;\n    this.tableResource.query(params).then(function (items) {\n      return _this.items = items;\n    });\n  };\n  AdminProductsComponent.prototype.filter = function (query) {\n    var filteredProducts = query ? this.products.filter(function (p) {\n      return p.title.toLowerCase().includes(query.toLowerCase());\n    }) : this.products;\n    this.initializeTable(filteredProducts);\n  };\n  AdminProductsComponent.prototype.ngOnDestroy = function () {\n    this.subscription.unsubscribe();\n  };\n  AdminProductsComponent.prototype.ngOnInit = function () {};\n  AdminProductsComponent.ɵfac = function AdminProductsComponent_Factory(t) {\n    return new (t || AdminProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n  };\n  AdminProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminProductsComponent,\n    selectors: [[\"app-admin-products\"]],\n    decls: 14,\n    vars: 11,\n    consts: [[\"routerLink\", \"/admin/products/new\", 1, \"btn\", \"btn-primary\"], [\"type\", \"text\", \"placeholder\", \"Search...\", 1, \"form-control\", 3, \"keyup\"], [\"query\", \"\"], [3, \"items\", \"itemCount\", \"reload\"], [3, \"property\", \"header\", \"sortable\", \"resizable\"], [\"dataTableCell\", \"\"], [3, \"property\"], [3, \"routerLink\"]],\n    template: function AdminProductsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        var _r7 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"p\")(1, \"a\", 0);\n        i0.ɵɵtext(2, \"New Product\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(3, \"p\")(4, \"input\", 1, 2);\n        i0.ɵɵlistener(\"keyup\", function AdminProductsComponent_Template_input_keyup_4_listener() {\n          i0.ɵɵrestoreView(_r7);\n          var _r0 = i0.ɵɵreference(5);\n          return i0.ɵɵresetView(ctx.filter(_r0.value));\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"data-table\", 3);\n        i0.ɵɵlistener(\"reload\", function AdminProductsComponent_Template_data_table_reload_6_listener($event) {\n          return ctx.reloadItems($event);\n        });\n        i0.ɵɵelement(7, \"data-table-column\", 4);\n        i0.ɵɵelementStart(8, \"data-table-column\", 4);\n        i0.ɵɵtemplate(9, AdminProductsComponent_ng_template_9_Template, 2, 5, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"data-table-column\", 6);\n        i0.ɵɵtemplate(12, AdminProductsComponent_ng_template_12_Template, 2, 3, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"items\", ctx.items)(\"itemCount\", ctx.itemCount);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"property\", \"title\")(\"header\", \"Title\")(\"sortable\", true)(\"resizable\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"property\", \"price\")(\"header\", \"Price\")(\"sortable\", true)(\"resizable\", true);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"property\", \"$key\");\n      }\n    },\n    dependencies: [i2.RouterLink],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n  return AdminProductsComponent;\n}();\nexports.AdminProductsComponent = AdminProductsComponent;","map":{"version":3,"mappings":";;;;;;AAEA;AAEA;;;;;;IC0BMA,YACF;;;;;IADEA,iFACF;;;;;;;;IAOEA,4BAAkD;IAAAA,oBAAI;IAAAA,iBAAI;;;;IAAvDA,qEAA8C;;;ADhCvD;EAYE,gCAAoBC,cAA8B;IAAlD;IAAoB,mBAAc,GAAdA,cAAc;IAHlC,UAAK,GAAc,EAAE;IAInB,IAAI,CAACC,YAAY,GAAG,IAAI,CAACD,cAAc,CAACE,MAAM,EAAE,CAC7CC,SAAS,CAAC,kBAAQ;MACjBC,KAAI,CAACC,QAAQ,GAAGA,QAAQ;MACxBD,KAAI,CAACE,eAAe,CAACD,QAAQ,CAAC;IAChC,CAAC,CAAC;EACN;EAEQE,gDAAe,GAAvB,UAAwBF,QAAmB;IAA3C;IACE,IAAI,CAACG,aAAa,GAAG,IAAIC,wCAAiB,CAACJ,QAAQ,CAAC;IACpD,IAAI,CAACG,aAAa,CAACE,KAAK,CAAC;MAAEC,MAAM,EAAE;IAAC,CAAE,CAAC,CACpCC,IAAI,CAAC,eAAK;MAAI,YAAI,CAACC,KAAK,GAAGA,KAAK;IAAlB,CAAkB,CAAC;IACpC,IAAI,CAACL,aAAa,CAACM,KAAK,EAAE,CACvBF,IAAI,CAAC,eAAK;MAAI,YAAI,CAACG,SAAS,GAAGD,KAAK;IAAtB,CAAsB,CAAC;EAC1C,CAAC;EAEDP,4CAAW,GAAX,UAAYS,MAAM;IAAlB;IACE,IAAI,CAAC,IAAI,CAACR,aAAa,EAAE;IAEzB,IAAI,CAACA,aAAa,CAACE,KAAK,CAACM,MAAM,CAAC,CAC7BJ,IAAI,CAAC,eAAK;MAAI,YAAI,CAACC,KAAK,GAAGA,KAAK;IAAlB,CAAkB,CAAC;EACtC,CAAC;EAEDN,uCAAM,GAAN,UAAOG,KAAa;IAClB,IAAIO,gBAAgB,GAAIP,KAAK,GAC3B,IAAI,CAACL,QAAQ,CAACa,MAAM,CAAC,WAAC;MAAI,QAAC,CAACC,KAAK,CAACC,WAAW,EAAE,CAACC,QAAQ,CAACX,KAAK,CAACU,WAAW,EAAE,CAAC;IAAnD,CAAmD,CAAC,GAC9E,IAAI,CAACf,QAAQ;IAEf,IAAI,CAACC,eAAe,CAACW,gBAAgB,CAAC;EACxC,CAAC;EAEDV,4CAAW,GAAX;IACE,IAAI,CAACN,YAAY,CAACqB,WAAW,EAAE;EACjC,CAAC;EAEDf,yCAAQ,GAAR,aACA,CAAC;;qBA3CUA,sBAAsB;EAAA;;UAAtBA,sBAAsB;IAAAgB;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;;QCVnC5B,yBAAG;QAC2DA,2BAAW;QAAAA,iBAAI;QAE7EA,yBAAG;QAGCA;UAAAA;UAAA;UAAA,OAASA,oCAAmB;QAAA,EAAC;QAF/BA,iBAG2D;QAG7DA,qCAGiC;QAA/BA;UAAA,OAAU6B,uBAAmB;QAAA,EAAC;QAC9B7B,uCAMoB;QAEpBA,4CAKC;QACCA,wHAEc;QAChBA,iBAAoB;QAEpBA,6CAEC;QACCA,0HAEc;QAChBA,iBAAoB;;;QA5BpBA,eAAe;QAAfA,iCAAe;QAIbA,eAAoB;QAApBA,kCAAoB;QAQpBA,eAAoB;QAApBA,kCAAoB;QAWpBA,eAAmB;QAAnBA,iCAAmB;;;;;;+BDnCvB;CAwDC,EAlDD;AAKa8B","names":["i0","productService","subscription","getAll","subscribe","_this","products","initializeTable","AdminProductsComponent","tableResource","angular_4_data_table_1","query","offset","then","items","count","itemCount","params","filteredProducts","filter","title","toLowerCase","includes","unsubscribe","selectors","decls","vars","consts","template","ctx","exports"],"sourceRoot":"","sources":["C:\\Angular\\routeShop\\src\\app\\admin\\components\\admin-products\\admin-products.component.ts","C:\\Angular\\routeShop\\src\\app\\admin\\components\\admin-products\\admin-products.component.html"],"sourcesContent":["import { Product } from '../../../shared/models/product';\nimport { Subscription } from 'rxjs/Subscription';\nimport { ProductService } from '../../../shared/services/product.service';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { DataTableResource } from 'angular-4-data-table';\n\n@Component({\n  selector: 'app-admin-products',\n  templateUrl: './admin-products.component.html',\n  styleUrls: ['./admin-products.component.css']\n})\nexport class AdminProductsComponent implements OnInit, OnDestroy {\n  products: Product[];\n  subscription: Subscription;\n  tableResource: DataTableResource<Product>;\n  items: Product[] = [];\n  itemCount: number; \n\n  constructor(private productService: ProductService) { \n    this.subscription = this.productService.getAll()\n      .subscribe(products => {\n        this.products = products;\n        this.initializeTable(products);\n      });\n  }\n\n  private initializeTable(products: Product[]) {\n    this.tableResource = new DataTableResource(products);\n    this.tableResource.query({ offset: 0 })\n      .then(items => this.items = items);\n    this.tableResource.count()\n      .then(count => this.itemCount = count);\n  }\n\n  reloadItems(params) {\n    if (!this.tableResource) return;\n\n    this.tableResource.query(params)\n      .then(items => this.items = items);    \n  }\n\n  filter(query: string) { \n    let filteredProducts = (query) ?\n      this.products.filter(p => p.title.toLowerCase().includes(query.toLowerCase())) :\n      this.products;\n\n    this.initializeTable(filteredProducts);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  ngOnInit() {\n  }\n\n}\n","\n<p>\n  <a routerLink=\"/admin/products/new\" class=\"btn btn-primary\">New Product</a>\n</p>\n<p>\n  <input \n    #query\n    (keyup)=\"filter(query.value)\"\n    type=\"text\" class=\"form-control\" placeholder=\"Search...\">\n</p>\n\n<data-table\n  [items]=\"items\"\n  [itemCount]=\"itemCount\"\n  (reload)=\"reloadItems($event)\">\n  <data-table-column\n    [property]=\"'title'\"  \n    [header]=\"'Title'\"\n    [sortable]=\"true\"\n    [resizable]=\"true\"\n  >\n  </data-table-column>\n  \n  <data-table-column\n    [property]=\"'price'\"  \n    [header]=\"'Price'\"\n    [sortable]=\"true\"\n    [resizable]=\"true\"\n  >\n    <ng-template #dataTableCell let-item=\"item\">\n      {{ item.price | currency:'USD':true }}\n    </ng-template>\n  </data-table-column>\n\n  <data-table-column\n    [property]=\"'$key'\"  \n  >\n    <ng-template #dataTableCell let-item=\"item\">\n      <a [routerLink]=\"['/admin/products/', item.$key]\">Edit</a>\n    </ng-template>\n  </data-table-column>\n\n</data-table>\n\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}